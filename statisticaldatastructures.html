<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistical Data Structures Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .tab-active {
            background-color: #2563eb;
            color: white;
            box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.2);
            transform: scale(1.05);
        }
        .transition-all { transition: all 0.2s ease-in-out; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 font-sans">

    <div class="max-w-6xl mx-auto p-4 md:p-8 space-y-6">
        <!-- Header -->
        <header class="text-center space-y-2 mb-8">
            <h1 class="text-3xl font-bold tracking-tight text-slate-800">Statistical Data Structures</h1>
            <p class="text-slate-500 max-w-2xl mx-auto">
                The way data is indexed determines how we can model it, plot it, and what questions we can answer.
            </p>
        </header>

        <!-- Navigation Tabs -->
        <div class="flex flex-wrap justify-center gap-2 mb-4">
            <button onclick="switchTab('cross-sectional')" id="btn-cross-sectional" class="tab-btn flex items-center gap-2 px-6 py-3 rounded-xl font-medium bg-white text-slate-600 hover:bg-slate-100 border border-slate-200 transition-all">
                Cross-Sectional
            </button>
            <button onclick="switchTab('time-series')" id="btn-time-series" class="tab-btn flex items-center gap-2 px-6 py-3 rounded-xl font-medium bg-white text-slate-600 hover:bg-slate-100 border border-slate-200 transition-all">
                Time-Series
            </button>
            <button onclick="switchTab('panel')" id="btn-panel" class="tab-btn flex items-center gap-2 px-6 py-3 rounded-xl font-medium bg-white text-slate-600 hover:bg-slate-100 border border-slate-200 transition-all">
                Panel (Longitudinal)
            </button>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Main Info Card -->
            <div class="lg:col-span-1">
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 h-full">
                    <div class="flex items-center gap-3 mb-4 text-blue-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <h2 class="text-xl font-semibold">Structure Details</h2>
                    </div>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="text-xs font-bold text-slate-400 uppercase tracking-wider">Row Index (Key)</label>
                            <p id="info-index" class="text-lg font-medium text-slate-800"></p>
                        </div>
                        
                        <div>
                            <label class="text-xs font-bold text-slate-400 uppercase tracking-wider">The "Typical" Question</label>
                            <p id="info-question" class="text-slate-700 italic"></p>
                        </div>

                        <div class="p-4 bg-slate-50 rounded-lg border border-slate-100">
                            <p class="text-sm text-slate-600 leading-relaxed">
                                <span class="font-semibold text-slate-800">Example:</span> <span id="info-example"></span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Interactive Visualization Card -->
            <div class="lg:col-span-2 space-y-6">
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center gap-3 text-emerald-600">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z" />
                            </svg>
                            <h2 class="text-xl font-semibold">Visual Representation</h2>
                        </div>
                        <span class="text-xs font-medium px-2 py-1 bg-emerald-50 text-emerald-700 rounded-md">
                            Interactive Chart
                        </span>
                    </div>
                    
                    <div class="h-64 w-full relative">
                        <canvas id="mainChart"></canvas>
                    </div>
                </div>

                <!-- Why Structure Matters Section -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                        <div class="flex items-center gap-2 mb-3 text-indigo-600">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                            </svg>
                            <h3 class="font-bold">Plotting</h3>
                        </div>
                        <p id="info-plotting" class="text-sm text-slate-600"></p>
                    </div>
                    
                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                        <div class="flex items-center gap-2 mb-3 text-orange-600">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
                            </svg>
                            <h3 class="font-bold">Modeling</h3>
                        </div>
                        <p id="info-modelling" class="text-sm text-slate-600"></p>
                    </div>

                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                        <div class="flex items-center gap-2 mb-3 text-rose-600">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
                            </svg>
                            <h3 class="font-bold">Storage</h3>
                        </div>
                        <p id="info-storage" class="text-sm text-slate-600"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comparison Table Footer -->
        <div class="bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm">
            <div class="p-4 bg-slate-50 border-b border-slate-200 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                </svg>
                <span class="font-bold text-slate-700">Quick Comparison Table</span>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-left text-sm">
                    <thead>
                        <tr class="bg-white border-b border-slate-100">
                            <th class="p-4 font-semibold text-slate-900">Structure</th>
                            <th class="p-4 font-semibold text-slate-900">Index</th>
                            <th class="p-4 font-semibold text-slate-900">Variation Source</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-100">
                        <tr id="row-cross-sectional">
                            <td class="p-4 font-medium">Cross-Sectional</td>
                            <td class="p-4 text-slate-600">Unit ($i$)</td>
                            <td class="p-4 text-slate-600">Between Units</td>
                        </tr>
                        <tr id="row-time-series">
                            <td class="p-4 font-medium">Time-Series</td>
                            <td class="p-4 text-slate-600">Time ($t$)</td>
                            <td class="p-4 text-slate-600">Within Unit (Over Time)</td>
                        </tr>
                        <tr id="row-panel">
                            <td class="p-4 font-medium">Panel</td>
                            <td class="p-4 text-slate-600">Unit + Time ($i, t$)</td>
                            <td class="p-4 text-slate-600">Both Between & Within</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        const structures = {
            'cross-sectional': {
                index: 'Unit (Entity)',
                question: 'How do different units differ from one another?',
                example: 'A snapshot of 500 different schools in 2023 looking at test scores.',
                modelling: 'Focuses on "between-unit" variation. Uses OLS regression or ANOVA.',
                plotting: 'Bar charts, histograms, or scatter plots across units.',
                storage: 'Primary key is the Unit ID. No duplicates allowed for units.',
                chartType: 'bar',
                chartData: {
                    labels: ['TechCorp', 'BioLife', 'EduGrow', 'RetailHub', 'FinStream'],
                    datasets: [{
                        label: 'Revenue ($M)',
                        data: [450, 320, 150, 680, 590],
                        backgroundColor: '#3b82f6',
                        borderRadius: 6
                    }]
                }
            },
            'time-series': {
                index: 'Time Point',
                question: 'How does this specific unit change over time?',
                example: 'Daily closing price of Apple (AAPL) stock over the last year.',
                modelling: 'Focuses on autocorrelation and trends. Uses ARIMA or Smoothing.',
                plotting: 'Line charts focusing on the temporal sequence.',
                storage: 'Primary key is the Timestamp. Sorting by time is critical.',
                chartType: 'line',
                chartData: {
                    labels: ['2023-Q1', '2023-Q2', '2023-Q3', '2023-Q4', '2024-Q1', '2024-Q2'],
                    datasets: [{
                        label: 'Metric Value',
                        data: [400, 450, 420, 500, 580, 620],
                        borderColor: '#10b981',
                        backgroundColor: '#10b98122',
                        fill: true,
                        tension: 0.3,
                        borderWidth: 3,
                        pointRadius: 5
                    }]
                }
            },
            'panel': {
                index: 'Unit + Time',
                question: 'How do changes over time differ across units?',
                example: 'Annual health data for 1,000 patients tracked over a decade.',
                modelling: 'Focuses on Fixed Effects or Random Effects to control for unobserved traits.',
                plotting: 'Spaghetti plots (multiple lines) or faceted charts.',
                storage: 'Composite key (Unit ID + Time). Data is "long" or "wide" format.',
                chartType: 'line',
                chartData: {
                    labels: ['2021', '2022', '2023', '2024'],
                    datasets: [
                        { label: 'Alice', data: [45, 52, 58, 65], borderColor: '#3b82f6', tension: 0.1 },
                        { label: 'Bob', data: [40, 42, 48, 55], borderColor: '#10b981', tension: 0.1 },
                        { label: 'Charlie', data: [55, 58, 52, 60], borderColor: '#f59e0b', tension: 0.1 }
                    ]
                }
            }
        };

        let currentChart = null;

        function switchTab(tabId) {
            // Update buttons
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('tab-active'));
            document.getElementById(`btn-${tabId}`).classList.add('tab-active');

            // Update info
            const data = structures[tabId];
            document.getElementById('info-index').textContent = data.index;
            document.getElementById('info-question').textContent = `"${data.question}"`;
            document.getElementById('info-example').textContent = data.example;
            document.getElementById('info-plotting').textContent = data.plotting;
            document.getElementById('info-modelling').textContent = data.modelling;
            document.getElementById('info-storage').textContent = data.storage;

            // Update table highlighting
            ['cross-sectional', 'time-series', 'panel'].forEach(id => {
                document.getElementById(`row-${id}`).classList.toggle('bg-blue-50/50', id === tabId);
            });

            // Update Chart
            const ctx = document.getElementById('mainChart').getContext('2d');
            if (currentChart) currentChart.destroy();
            
            currentChart = new Chart(ctx, {
                type: data.chartType,
                data: data.chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: tabId === 'panel' }
                    },
                    scales: {
                        y: { beginAtZero: false, grid: { color: '#f1f5f9' } },
                        x: { grid: { display: false } }
                    }
                }
            });
        }

        // Initialize with first tab
        window.onload = () => switchTab('cross-sectional');
    </script>
</body>
</html>
